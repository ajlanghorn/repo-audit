checks:
  - type: :file_content
    metadata:
      description: 'LICENSE file has the expected content'
    arguments:
      filename: LICENSE
      content_matchers:
        - MIT License
        - Copyright \(c\) [\d-]+ Crown copyright \(Ministry of Justice\)

  - type: :file_content
    metadata:
      description: 'Dangerfile file has the expected content'
    arguments:
      filename: Dangerfile
      content_matchers:
        - ministryofjustice/danger

  - type: :at_least_one_file
    metadata:
      description: 'Repository uses at least one of these CI: Travis or Circle'
    arguments:
      filenames:
        - .travis.yml
        - circle.yml

  - type: :version
    metadata:
      description: 'If a ruby repository, version must be ~> 2.2'
    arguments:
      version: '~> 2.2'
      file_matchers:
        - Gemfile: ^ruby '(?<version>\S+)'$
        - .ruby-version: ^(?<version>\S+)$
        - .travis.yml: '^rvm: (?<version>\S+)$'

  - type: :version
    metadata:
      description: 'If a rails repository, Rails version must be >= 4.2'
    arguments:
      version: '>= 4.2'
      file_matchers:
        - Gemfile.lock: ^\s+rails \((?<version>\S+)\)$

  - type: :last_commit
    metadata:
      description: 'Timestamp and author of the last commit'

  - type: :is_public
    metadata:
      description: 'Repository is public'
